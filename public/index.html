<!DOCTYPE html>
<html>
<head>
  <title>Firebase Notification Test</title>
</head>
<body>
  <h2>Get Firebase Token (Mobile Supported)</h2>
  <button onclick="getToken()">Get Token</button>
  <p><strong>Token:</strong></p>
  <textarea id="tokenBox" rows="6" cols="80"></textarea>

  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-messaging-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDpfGdYS-d36L_okAgAi0x9pCznVU8NzVs",
      authDomain: "notification-84b9d.firebaseapp.com",
      projectId: "notification-84b9d",
      storageBucket: "notification-84b9d.appspot.com",
      messagingSenderId: "14580269122",
      appId: "1:14580269122:web:69ae1072b63824f2ac2ddb"
    };

    firebase.initializeApp(firebaseConfig);
    const messaging = firebase.messaging();

    async function getToken() {
      try {
        const currentToken = await messaging.getToken({
          vapidKey: 'BOAX9ijp4BVVghGN45BJBGsiBt3G11W6LUYOuDIiahpSP4-R9xD5QfCgNOaHuUlOQ6WwUS14mv1CzWgYHRnZByY'
        });

        if (currentToken) {
          document.getElementById("tokenBox").value = currentToken;
          console.log("Device Token:", currentToken);
        } else {
          alert("No token received. Permission required.");
        }
      } catch (err) {
        console.error("Error getting token:", err);
        alert("Token Error: " + err.message);
      }
    }

    messaging.onMessage(payload => {
      console.log("Message received: ", payload);
      alert("Foreground Message: " + payload.notification.title);
    });
  </script>
</body>
</html>
